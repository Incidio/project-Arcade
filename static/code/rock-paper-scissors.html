<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Камень ножницы бумага</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #222;
            color: white;
        }
        .choices button {
            font-size: 20px;
            padding: 10px;
            margin: 10px;
            cursor: pointer;
        }
        #result {
            font-size: 24px;
            margin-top: 20px;
        }
        #game-image {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            display: block;
        }
    </style>
</head>
<body>
    <h1>Камень ножницы бумага</h1>
    <img id="game-image" src="/static/images/rock-paper-scissors/game.jpg" alt="Primary Image">
    <p id="choose-text">Выберите вашу руку</p>
    <div class="choices">
        <button onclick="playGame('Камень')">Камень</button>
        <button onclick="playGame('Бумага')">Бумага</button>
        <button onclick="playGame('Ножницы')">Ножницы</button>
    </div>
    
    <script>
        const images = {
            Камень: "/static/images/rock-paper-scissors/rock.png",
            Бумага: "/static/images/rock-paper-scissors/paper.png",
            Ножницы: "/static/images/rock-paper-scissors/scissors.png",
            win: "/static/images/rock-paper-scissors/win.jpg",
            lose: "/static/images/rock-paper-scissors/lose.png",
            tie: "/static/images/rock-paper-scissors/tie.jpg"
        };

        function shuffleImages(callback) {
            const choices = ['Камень', 'Бумага', 'Ножницы'];
            let index = 0;

            const interval = setInterval(() => {
                document.getElementById('game-image').src = images[choices[index]];
                index = (index + 1) % choices.length;
            }, 200);

            setTimeout(() => {
                clearInterval(interval);
                callback();
            }, 1000); // Shuffle for 1 second
        }

        function playGame(userChoice) {
            shuffleImages(() => {
                const choices = ['Камень', 'Бумага', 'Ножницы'];
                const computerChoice = choices[Math.floor(Math.random() * 3)];
                let result = '';
                let resultImage = '';
                
                if (userChoice === computerChoice) {
                    result = "Ничья!";
                    resultImage = images.tie;
                } else if (
                    (userChoice === 'Камень' && computerChoice === 'Ножницы') ||
                    (userChoice === 'Бумага' && computerChoice === 'Камень') ||
                    (userChoice === 'Ножницы' && computerChoice === 'Бумага')
                ) {
                    result = 'Победа!';
                    resultImage = images.win;
                } else {
                    result = 'Поражение!';
                    resultImage = images.lose;
                }
                
                document.getElementById('game-image').src = images[computerChoice];
                document.getElementById('choose-text').innerText = result;
            });
        }
    </script>
</body>
</html>
